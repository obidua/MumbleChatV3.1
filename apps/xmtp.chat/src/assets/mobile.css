/* Mobile-specific styles for PWA */

/* Ensure full viewport height on mobile with dark background matching landing page */
html,
body {
  min-height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;
  background: #05060f !important;
  background-color: #05060f !important;
}

#root {
  min-height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;
}

/* Override Mantine's default background - very specific selectors */
body[data-mantine-color-scheme],
body[data-mantine-color-scheme="light"],
body[data-mantine-color-scheme="dark"],
body[data-mantine-color-scheme="auto"] {
  background: #05060f !important;
  background-color: #05060f !important;
}

/* iOS Safe Area Support */
@supports (padding: env(safe-area-inset-bottom)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* Prevent pull-to-refresh on mobile */
@media screen and (max-width: 768px) {
  body {
    overscroll-behavior-y: contain;
    touch-action: pan-y;
  }

  /* Better scrolling on mobile */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* Disable text selection on buttons and navigation */
  button,
  nav,
  [role="button"] {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* Better tap targets on mobile */
  button,
  a,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Improve input behavior on mobile */
  input,
  textarea {
    font-size: 16px; /* Prevents zoom on iOS */
  }

  /* Hide scrollbars but maintain scrolling */
  ::-webkit-scrollbar {
    width: 0;
    height: 0;
    display: none;
  }

  * {
    scrollbar-width: none;
  }
}

/* Fix for notch devices */
@supports (padding: max(0px)) {
  @media screen and (max-width: 768px) {
    .header,
    .footer {
      padding-left: max(12px, env(safe-area-inset-left));
      padding-right: max(12px, env(safe-area-inset-right));
    }
  }
}

/* Landscape orientation adjustments */
@media screen and (max-width: 768px) and (orientation: landscape) {
  :root {
    --bottom-nav-height: 56px;
  }
}

/* Animation for page transitions on mobile */
@media screen and (max-width: 768px) {
  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideOutLeft {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(-100%);
      opacity: 0;
    }
  }

  .page-enter {
    animation: slideInRight 0.3s ease-out;
  }

  .page-exit {
    animation: slideOutLeft 0.3s ease-out;
  }
}

/* Fix for modal footers being hidden by bottom navigation */
@media screen and (max-width: 767px) {
  /* Mantine Modal adjustments */
  .mantine-Modal-content {
    max-height: calc(
      100vh - var(--bottom-nav-height) - var(--mobile-safe-area-bottom) - 40px
    ) !important;
  }

  .mantine-Modal-body {
    padding-bottom: 16px !important;
  }

  /* Ensure modals are scrollable when content is too tall */
  .mantine-Modal-inner {
    padding-bottom: calc(
      var(--bottom-nav-height) + var(--mobile-safe-area-bottom) + 20px
    ) !important;
  }

  /* Fix for full-screen modals */
  .mantine-Modal-root[data-full-screen="true"] .mantine-Modal-content {
    max-height: 100vh !important;
    padding-bottom: calc(
      var(--bottom-nav-height) + var(--mobile-safe-area-bottom)
    ) !important;
  }
}

/* Light mode text visibility - Clean and readable */
@media (prefers-color-scheme: light) {
  /* Ensure all text elements have proper contrast in light mode */
  body,
  p,
  span,
  div,
  label,
  button,
  input,
  textarea,
  select {
    color: #212529;
  }

  /* Ensure headings are visible */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: #000000;
  }

  /* Fix for Mantine components */
  .mantine-Text-root {
    color: #212529;
  }

  .mantine-Title-root {
    color: #000000;
  }

  .mantine-TextInput-label,
  .mantine-Textarea-label,
  .mantine-Select-label,
  .mantine-Checkbox-label {
    color: #495057;
  }

  .mantine-TextInput-input,
  .mantine-Textarea-input,
  .mantine-Select-input {
    color: #212529;
    background: #ffffff;
    border-color: rgba(0, 0, 0, 0.12);
  }

  .mantine-TextInput-input::placeholder,
  .mantine-Textarea-input::placeholder,
  .mantine-Select-input::placeholder {
    color: rgba(0, 0, 0, 0.4);
  }

  /* Accordion text visibility */
  .mantine-Accordion-label,
  .mantine-Accordion-control {
    color: #212529;
  }

  .mantine-Accordion-content {
    color: #495057;
  }

  /* Button text visibility */
  .mantine-Button-root {
    color: #ffffff;
  }

  /* Badge text visibility */
  .mantine-Badge-root {
    color: #ffffff;
  }

  /* Menu and dropdown text */
  .mantine-Menu-item,
  .mantine-Menu-label {
    color: #212529;
  }

  /* Modal and dialog text */
  .mantine-Modal-title {
    color: #000000;
  }

  .mantine-Modal-body {
    color: #212529;
  }

  /* Stack and Group children */
  .mantine-Stack-root,
  .mantine-Group-root {
    color: #212529;
  }

  /* Ensure links are visible */
  a {
    color: #2196f3;
  }

  a:hover {
    color: #1976d2;
  }

  /* Fix for dimmed text */
  [data-dimmed="true"],
  .mantine-Text-root[data-c="dimmed"] {
    color: #6c757d !important;
  }

  /* Specific fixes for identity and profile pages */
  .mantine-Stack-root .mantine-Text-root,
  .mantine-Group-root .mantine-Text-root {
    color: #212529 !important;
  }

  /* Fix for code and pre elements */
  code,
  pre {
    color: #212529;
    background: #f8f9fa;
  }

  /* Notification text */
  .mantine-Notification-root {
    color: #212529;
  }

  /* Tab text */
  .mantine-Tabs-tab {
    color: #6c757d;
  }

  .mantine-Tabs-tab[data-active="true"] {
    color: #2196f3;
  }
}

/* Dark mode text visibility - Telegram-inspired colors */
@media (prefers-color-scheme: dark) {
  /* Ensure all text elements have proper contrast in dark mode */
  body,
  p,
  span,
  div,
  label,
  button,
  input,
  textarea,
  select {
    color: #e9ecef;
  }

  /* Ensure headings are visible */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: #ffffff;
  }

  /* Fix for Mantine components */
  .mantine-Text-root {
    color: #e9ecef;
  }

  .mantine-Title-root {
    color: #ffffff;
  }

  .mantine-TextInput-label,
  .mantine-Textarea-label,
  .mantine-Select-label,
  .mantine-Checkbox-label {
    color: #adb5bd;
  }

  .mantine-TextInput-input,
  .mantine-Textarea-input,
  .mantine-Select-input {
    color: #e9ecef;
    background: #0f1419;
    border-color: rgba(255, 255, 255, 0.12);
  }

  .mantine-TextInput-input::placeholder,
  .mantine-Textarea-input::placeholder,
  .mantine-Select-input::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }

  /* Accordion text visibility */
  .mantine-Accordion-label,
  .mantine-Accordion-control {
    color: #e9ecef;
  }

  .mantine-Accordion-content {
    color: #adb5bd;
  }

  /* Button text visibility */
  .mantine-Button-root {
    color: #ffffff;
  }

  /* Badge text visibility */
  .mantine-Badge-root {
    color: #ffffff;
  }

  /* Menu and dropdown text */
  .mantine-Menu-item,
  .mantine-Menu-label {
    color: #e9ecef;
  }

  /* Modal and dialog text */
  .mantine-Modal-title {
    color: #ffffff;
  }

  .mantine-Modal-body {
    color: #e9ecef;
  }

  /* Stack and Group children */
  .mantine-Stack-root,
  .mantine-Group-root {
    color: #e9ecef;
  }

  /* Ensure links are visible */
  a {
    color: #2196f3;
  }

  a:hover {
    color: #42a5f5;
  }

  /* Fix for dimmed text */
  [data-dimmed="true"],
  .mantine-Text-root[data-c="dimmed"] {
    color: #6c757d !important;
  }

  /* Specific fixes for identity and profile pages */
  .mantine-Stack-root .mantine-Text-root,
  .mantine-Group-root .mantine-Text-root {
    color: #e9ecef !important;
  }

  /* Fix for code and pre elements */
  code,
  pre {
    color: #e9ecef;
    background: #17212b;
  }

  /* Notification text */
  .mantine-Notification-root {
    color: #e9ecef;
  }

  /* Tab text */
  .mantine-Tabs-tab {
    color: #6c757d;
  }

  .mantine-Tabs-tab[data-active="true"] {
    color: #2196f3;
  }
}
